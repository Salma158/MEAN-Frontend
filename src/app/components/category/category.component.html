<p-button (click)="showDialog()" icon="pi pi-plus-circle"  ></p-button>
<p-dialog header="add category" [(visible)]="visible" [style]="{width: '50vw'}">
    <form  #categoryForm (ngSubmit)="addCategory()" novalidate>
        <div class="row justify-content-center">
            <div class="col-8 p-2">
                <label for="categoryName">CategoryName</label>
                <input pInputText 
                    id="categoryName" 
                    name="categoryName" 
                    [(ngModel)]="categoryFormValues.categoryName"
                    #categoryName="ngModel"
                    required
                    
                />
                @if (categoryName.invalid && (categoryName.touched || categoryName.dirty)) {
                    <div id="category" class="form-text text-danger">
                        @if(categoryName.errors?.['required']){
                            <small>This field is required</small>
                        } 
                        @if(categoryName.errors?.['pattern']) {
                            <small>Invalid pattern</small>
                        } 
                    </div>
                }
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-8 p-2">
                <p-button type="Submit" label="Submit"></p-button>
            </div>
        </div>
        </form>
</p-dialog>
<p-table [value]="categories" [tableStyle]="{ 'min-width': '50rem' }">
    <ng-template pTemplate="header">
        <tr>
            
            <th>Category</th>
            <th>Actions</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-category let-i="index">
        <tr>
            
            <td>{{ category.categoryName }}</td>
            <td>
                <button class="btn btn-info" (click)="DeleteCategory(category._id)">Delete</button>
                <button class="btn btn-info" (click)="openUpdateCategoryModal(updateCategoryModal, category._id)">Update</button>
                <ng-template #updateCategoryModal let-modal>
                    <div class="modal-body">
                      <label for="updatedCategoryName">Updated Category Name:</label>
                      <input type="text" id="updatedCategoryName" [(ngModel)]="selectedCategory.name" class="form-control" />
                      
                    </div>
                  
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Close</button>
                      <button type="button" class="btn btn-primary" (click)="updateCategory()">Update Category</button>
                    </div>
                  </ng-template>
            </td>
        </tr>
    </ng-template>
</p-table>
